<!DOCTYPE html>
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@inject Helpdesk.Mvc.Data.ApplicationDbContext Context
@{
	var org = ViewData["org"];
	ApplicationUser appUser = await UserManager.GetUserAsync(User);
	var fullName = appUser != null ? appUser.FullName : "Untitled";
	var profilePicture = appUser != null ? appUser.ProfilePictureUrl : "#";
	var organization = Context.Organization.Where(x => x.organizationId.Equals(org)).FirstOrDefault();
	var organizationName = organization != null ? organization.organizationName : "Undefined";
	var customerName = "";
	Guid cust;
	if (appUser.IsCustomer)
	{
		cust = (Guid)ViewData["cust"];
		var customer = Context.Customer.Where(x => x.customerId.Equals(cust)).FirstOrDefault();
		customerName = (customer != null) ? customer.customerName : "Undefined";

	}

}

<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>DotnetDesk | @ViewData["Title"]</title>
	<!-- Tell the browser to be responsive to screen width -->
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<environment include="Development">
		@*<link rel="stylesheet" href="~/lib/twitter-bootstrap/css/bootstrap.css" />*@
		<!--jqueryUI-->
		<link rel="stylesheet" href="~/lib/jquery-ui-1.12.1/jquery-ui.min.css" />
		<!--datatables.net-->
		<link rel="stylesheet" href="~/lib/DataTables/datatables.min.css" />
		<!--toastr-->
		<link rel="stylesheet" href="~/lib/toastr/toastr.min.css" />
		<!--sweetalert-->
		<link rel="stylesheet" href="~/lib/sweetalert/sweetalert.css" />
		<!--fontawesome-->
		<link rel="stylesheet" href="~/lib/font-awesome/css/fontawesome.css" />
	</environment>
	<environment exclude="Development">
		<link rel="stylesheet" href="~/lib/twitter-bootstrap/css/bootstrap.css"
		      asp-fallback-href="~/lib/twitter-bootstrap/css/bootstrap.css"
		      asp-fallback-test-class="sr-only" asp-fallback-test-property="position" asp-fallback-test-value="absolute" />

		<!--jqueryUI-->
		<link rel="stylesheet" href="~/lib/jquery-ui-1.12.1/jquery-ui.min.css" />
		<!--datatables.net-->
		<link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" />
		<!--toastr-->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" />
		<!--sweetalert-->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" />
		<!--fontawesome-->
		<link rel="stylesheet" href="~/lib/font-awesome/css/fontawesome.css" />
	</environment>

	<!-- Ladda style -->
	<link rel="stylesheet" href="~/lib/ladda/ladda-themeless.min.css">
	<!-- Ionicons -->
	<link rel="stylesheet" href="~/lib/Ionicons/css/ionicons.min.css">
	<!-- Theme style -->
	<link rel="stylesheet" href="~/admin-lte/css/AdminLTE.min.css">
	<!-- AdminLTE Skins. Choose a skin from the css/skins
	     folder instead of downloading all of them to reduce the load. -->
	@*<link rel="stylesheet" href="~/admin-lte/css/skins/_all-skins.min.css">*@
	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
	<!-- Google Font -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
	@RenderSection("Styles", required: false)
</head>
<body class="hold-transition sidebar-mini sidebar-collapse">
	<!-- Site wrapper -->
	<div class="wrapper">
		<!-- Navbar -->
		<!-- Header Navbar: style can be found in header.less -->
		<nav class="main-header navbar navbar-expand navbar-white navbar-light">
			<!-- Left navbar links -->
			<ul class="navbar-nav">
				<li class="nav-item">
					<a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a>
				</li>
				<li class="nav-item d-none d-sm-inline-block">
					<a href="../../index3.html" class="nav-link">Home</a>
				</li>
				<li class="nav-item d-none d-sm-inline-block">
					<a href="#" class="nav-link">Contact</a>
				</li>
			</ul>

			<!-- SEARCH FORM -->
			<form class="form-inline ml-3">
				<div class="input-group input-group-sm">
					<input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
					<div class="input-group-append">
						<button class="btn btn-navbar" type="submit">
							<i class="fas fa-search"></i>
						</button>
					</div>
				</div>
			</form>

			<!-- Right navbar links -->
			<ul class="navbar-nav ml-auto">
				<!-- Messages Dropdown Menu -->
				<li class="nav-item dropdown">
					<a class="nav-link" data-toggle="dropdown" href="#">
						<i class="far fa-comments"></i>
						<span class="badge badge-danger navbar-badge">3</span>
					</a>
					<div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
						<a href="#" class="dropdown-item">
							<!-- Message Start -->
							<div class="media">
								<img src="../../dist/img/user1-128x128.jpg" alt="User Avatar" class="img-size-50 mr-3 img-circle">
								<div class="media-body">
									<h3 class="dropdown-item-title">
										Brad Diesel
										<span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
									</h3>
									<p class="text-sm">Call me whenever you can...</p>
									<p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
								</div>
							</div>
							<!-- Message End -->
						</a>
						<div class="dropdown-divider"></div>
						<a href="#" class="dropdown-item">
							<!-- Message Start -->
							<div class="media">
								<img src="../../dist/img/user8-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
								<div class="media-body">
									<h3 class="dropdown-item-title">
										John Pierce
										<span class="float-right text-sm text-muted"><i class="fas fa-star"></i></span>
									</h3>
									<p class="text-sm">I got your message bro</p>
									<p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
								</div>
							</div>
							<!-- Message End -->
						</a>
						<div class="dropdown-divider"></div>
						<a href="#" class="dropdown-item">
							<!-- Message Start -->
							<div class="media">
								<img src="../../dist/img/user3-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
								<div class="media-body">
									<h3 class="dropdown-item-title">
										Nora Silvester
										<span class="float-right text-sm text-warning"><i class="fas fa-star"></i></span>
									</h3>
									<p class="text-sm">The subject goes here</p>
									<p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
								</div>
							</div>
							<!-- Message End -->
						</a>
						<div class="dropdown-divider"></div>
						<a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
					</div>
				</li>
				<!-- Notifications Dropdown Menu -->
				<li class="nav-item dropdown">
					<a class="nav-link" data-toggle="dropdown" href="#">
						<i class="far fa-bell"></i>
						<span class="badge badge-warning navbar-badge">15</span>
					</a>
					<div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
						<span class="dropdown-item dropdown-header">15 Notifications</span>
						<div class="dropdown-divider"></div>
						<a href="#" class="dropdown-item">
							<i class="fas fa-envelope mr-2"></i> 4 new messages
							<span class="float-right text-muted text-sm">3 mins</span>
						</a>
						<div class="dropdown-divider"></div>
						<a href="#" class="dropdown-item">
							<i class="fas fa-users mr-2"></i> 8 friend requests
							<span class="float-right text-muted text-sm">12 hours</span>
						</a>
						<div class="dropdown-divider"></div>
						<a href="#" class="dropdown-item">
							<i class="fas fa-file mr-2"></i> 3 new reports
							<span class="float-right text-muted text-sm">2 days</span>
						</a>
						<div class="dropdown-divider"></div>
						<a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
					</div>
				</li>
				<li class="nav-item">
					<a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#">
						<i class="fas fa-th-large"></i>
					</a>
				</li>
			</ul>


			@*@if (appUser.IsCustomer)
				{

					<span class="hidden-xs"><b>@customerName</b></span>
				}
				else
				{

					<span class="hidden-xs"><b>@organizationName</b></span>
				}

				@Html.Partial("_ProfileSignout")*@
		</nav>

		<!-- =============================================== -->
		<!-- Left side column. contains the sidebar -->
		<!-- Main Sidebar Container -->
		<aside class="main-sidebar sidebar-dark-primary elevation-4">
			<!-- Logo -->
			@Html.Partial("_Logo")
			<!-- Sidebar user panel -->
			<!-- Sidebar -->
			<div class="sidebar">
				<!-- Sidebar user (optional) -->
				@await Html.PartialAsync("_UserPanel");
				<nav class="mt-2">
					@if (appUser != null)
					{

						<ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
							<!-- Add icons to the links using the .nav-icon class
							with font-awesome or any other icon font library -->
							@if (appUser.IsSuperAdmin)
							{

								<li class="nav-item">
									<a href="@Url.Action("Index", "Customer", new { org = org })" class="nav-link @Html.IsSelected(controller: "Customer")">
										<i class="nav-icon fas fa-th"></i>
										<p>
											Customers
											<span class="right badge badge-danger">New</span>
										</p>
									</a>
								</li>
								<li class="nav-item">
									<a href="@Url.Action("Index", "Product", new { org = org })" class="nav-link @Html.IsSelected(controller: "Product")">
										<i class="nav-icon fas fa-th"></i>
										<p>
											Products
											<span class="right badge badge-danger">New</span>
										</p>
									</a>
								</li>
								<li class="nav-item">
									<a href="@Url.Action("Index", "ProductCategory", new { org = org })" class="nav-link @Html.IsSelected(controller: "ProductCategory")">
										<i class="nav-icon fas fa-th"></i>
										<p>
											Products Category
											<span class="right badge badge-danger">New</span>
										</p>
									</a>
								</li>
								<li class="nav-item">
									<a href="@Url.Action("Index", "SupportAgent", new { org = org })" class="nav-link @Html.IsSelected(controller: "SupportAgent")">
										<i class="nav-icon fas fa-th"></i>
										<p>
											Support Agents
											<span class="right badge badge-danger">New</span>
										</p>
									</a>
								</li>
								<li class="nav-item">
									<a href="@Url.Action("Index", "SupportEngineer", new { org = org })" class="nav-link @Html.IsSelected(controller: "SupportEngineer")">
										<i class="nav-icon fas fa-th"></i>
										<p>
											Support Engineers
											<span class="right badge badge-danger">New</span>
										</p>
									</a>
								</li>
								<li class="nav-item">
									<a href="@Url.Action("Index", "Ticket", new { org = org })" class="nav-link @Html.IsSelected(controller: "Ticket")">
										<i class="nav-icon fas fa-th"></i>
										<p>
											Support Engineers
											<span class="right badge badge-danger">Ticket</span>
										</p>
									</a>
								</li>

							}
							@if (appUser.IsCustomer)
							{
								<li class="nav-item">
									<a href="@Url.Action("Index", "Ticket", new { org = org })" class="nav-link @Html.IsSelected(controller: "Ticket")">
										<i class="nav-icon fas fa-th"></i>
										<p>
											Support Engineers
											<span class="right badge badge-danger">Ticket</span>
										</p>
									</a>
								</li>
							}
							@if (appUser.IsSupportAgent)
							{
								<li class="nav-item">
									<a href="@Url.Action("Index", "Ticket", new { org = org })" class="nav-link @Html.IsSelected(controller: "Ticket")">
										<i class="nav-icon fas fa-th"></i>
										<p>
											Support Engineers
											<span class="right badge badge-danger">Ticket</span>
										</p>
									</a>
								</li>
							}
							@if (appUser.IsSupportEngineer)
							{
								<li class="nav-item">
									<a href="@Url.Action("Index", "Ticket", new { org = org })" class="nav-link @Html.IsSelected(controller: "Ticket")">
										<i class="nav-icon fas fa-th"></i>
										<p>
											Support Engineers
											<span class="right badge badge-danger">Ticket</span>
										</p>
									</a>
								</li>
							}
						</ul>
					}

				</nav>
				<!-- /.sidebar-menu -->
			</div>
			<!-- /.sidebar -->
		</aside>
		<!-- =============================================== -->
		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<section class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1>Collapsed Sidebar</h1>
						</div>
						<div class="col-sm-6">
							<ol class="breadcrumb float-sm-right">
								<li class="breadcrumb-item"><a href="#">Home</a></li>
								<li class="breadcrumb-item"><a href="#">Layout</a></li>
								<li class="breadcrumb-item active">Collapsed Sidebar</li>
							</ol>
						</div>
					</div>
				</div><!-- /.container-fluid -->
			</section>

			@RenderBody()
		</div>
		<!-- /.content-wrapper -->
		@Html.Partial("_Footer")

	</div>
	<!-- ./wrapper -->

	<environment include="Development">
		<script src="~/lib/jquery/jquery.min.js"></script>
		<script src="~/lib/twitter-bootstrap/js/bootstrap.js"></script>
		<script src="~/js/site.js" asp-append-version="true"></script>
		<!--jqueryUI-->
		<script src="~/lib/jquery-ui-1.12.1/jquery-ui.min.js"></script>
		<!--datatables.net-->
		<script src="~/lib/DataTables/datatables.min.js"></script>
		<!--serializeJSON-->
		<script src="~/lib/marioizquierdo-jquery.serializeJSON/jquery.serializejson.min.js"></script>
		<!--toastr-->
		<script src="~/lib/toastr/toastr.min.js"></script>
		<!--sweetalert-->
		<script src="~/lib/sweetalert/sweetalert.min.js"></script>
	</environment>
	<environment exclude="Development">
		<script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.0.min.js"
			asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
			asp-fallback-test="window.jQuery"
			crossorigin="anonymous"
			integrity="sha384-K+ctZQ+LL8q6tP7I94W+qzQsfRV2a+AfHIi9k8z8l9ggpc8X+Ytst4yBo/hH+8Fk">
		</script>
		<script src="~/lib/twitter-bootstrap/dist/js/bootstrap.min.js"
			asp-fallback-src="~/lib/twitter-bootstrap/dist/js/bootstrap.min.js"
			asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal"
			crossorigin="anonymous"
			integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa">
		</script>
		<script src="~/js/site.min.js" asp-append-version="true"></script>
		<!--jqueryUI-->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
		<!--datatables.net-->
		<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
		<!--serializeJSON-->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.serializeJSON/2.9.0/jquery.serializejson.min.js"></script>
		<!--toastr-->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
		<!--sweetalert-->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
	</environment>

	@RenderSection("Scripts", required: false)

	<!-- Ladda -->
	<script src="~/lib/ladda/spin.min.js"></script>
	<script src="~/lib/ladda/ladda.min.js"></script>
	<script src="~/lib/ladda/ladda.jquery.min.js"></script>
	<!-- SlimScroll -->
	<script src="~/lib/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<!-- FastClick -->
	<script src="~/lib/fastclick/lib/fastclick.js"></script>
	<!-- AdminLTE App -->
	<script src="~/admin-lte/js/adminlte.js"></script>
	<script src="~/admin-lte/js/demo.js"></script>
	<script>
		$(document).ready(function () {
			$('.sidebar-menu').tree()
		})
	</script>
</body>
</html>
