<!DOCTYPE html>
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@{
	var org = ViewData["org"];
	ApplicationUser appUser = await UserManager.GetUserAsync(User);
	var fullName = appUser != null ? appUser.FullName : "Untitled";
	var profilePicture = appUser != null ? appUser.ProfilePictureUrl : "#";
	var wallpaperPicture = appUser != null ? appUser.WallpaperPictureUrl : "#";
}
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>DotnetDesk | @ViewData["Title"]</title>
	<!-- Tell the browser to be responsive to screen width -->
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<environment include="Development">
		@*<link rel="stylesheet" href="~/lib/twitter-bootstrap/css/bootstrap.css" />*@
		<!--jqueryUI-->
		<link rel="stylesheet" href="~/lib/jquery-ui-1.12.1/jquery-ui.min.css" />
		<!--datatables.net-->
		@*<link rel="stylesheet" href="~/lib/DataTables/datatables.min.css" />*@
		<link href="~/lib/datatables.net-bs4/css/dataTables.bootstrap4.css" rel="stylesheet" />
		<!--toastr-->
		<link rel="stylesheet" href="~/lib/toastr/toastr.min.css" />
		<!--sweetalert-->
		<link rel="stylesheet" href="~/lib/sweetalert/sweetalert.css" />
		<!--fontawesome-->
		<link rel="stylesheet" href="~/lib/font-awesome/css/all.min.css" />
	</environment>
	<environment exclude="Development">
		<link rel="stylesheet" href="~/lib/twitter-bootstrap/css/bootstrap.css"
		      asp-fallback-href="~/lib/twitter-bootstrap/css/bootstrap.css"
		      asp-fallback-test-class="sr-only" asp-fallback-test-property="position" asp-fallback-test-value="absolute" />

		<!--jqueryUI-->
		<link rel="stylesheet" href="~/lib/jquery-ui-1.12.1/jquery-ui.min.css" />
		<!--datatables.net-->
		<link href="~/lib/datatables.net-bs4/css/dataTables.bootstrap4.css" rel="stylesheet" />
		<!--toastr-->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" />
		<!--sweetalert-->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" />
		<!--fontawesome-->
		<link rel="stylesheet" href="~/lib/font-awesome/css/all.min.css" />
	</environment>

	<!-- Ladda style -->
	<link rel="stylesheet" href="~/lib/ladda/ladda-themeless.min.css">
	<!-- Ionicons -->
	<link rel="stylesheet" href="~/lib/Ionicons/css/ionicons.min.css">
	<!-- Theme style -->
	<link rel="stylesheet" href="~/admin-lte/css/AdminLTE.min.css">
	<!-- AdminLTE Skins. Choose a skin from the css/skins
	     folder instead of downloading all of them to reduce the load. -->
	@*<link rel="stylesheet" href="~/admin-lte/css/skins/_all-skins.min.css">*@
	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
	<!-- Google Font -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
	@RenderSection("Styles", required: false)
</head>
<body class="hold-transition skin-yellow sidebar-collapse">
	<!-- Site wrapper -->
	<div class="wrapper">
		<!-- Logo -->
		<!-- Header Navbar: style can be found in header.less -->
		<nav class="main-header navbar navbar-expand-lg navbar-light bg-light">


			@Html.Partial("_Logo")
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item active">
						<a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">Link</a>
					</li>
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							Dropdown
						</a>
						<div class="dropdown-menu" aria-labelledby="navbarDropdown">
							<a class="dropdown-item" href="#">Action</a>
							<a class="dropdown-item" href="#">Another action</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="#">Something else here</a>
						</div>
					</li>
					<li class="nav-item">
						<a class="nav-link disabled" href="#">Disabled</a>
					</li>
				</ul>

				<ul class="navbar navbar-nav mr-sm-2">
					<li class="dropdown user user-menu">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<i class="fa fa-picture-o"></i>
							<span class="hidden-xs"><b>Wallpaper</b></span>
						</a>
						<ul class="dropdown-menu">
							<!-- User image -->
							<li class="user-footer text-center">
								<span class="btn btn-success fileinput-button">
									<i class="fa fa-camera bg-green"></i>
									<span>Select file ...</span>
									<!-- The file input field used as target for the file upload widget -->
									<input id="fileupload" type="file" name="files" multiple="">
								</span>
							</li>
							<li class="user-footer">
								<div id="progress" class="progress">
									<div class="progress-bar progress-bar-success"></div>
								</div>
							</li>

						</ul>
					</li>
					<!-- User Account: style can be found in dropdown.less -->
					@*@Html.Partial("_ProfileSignout")*@

				</ul>

				@*<form class="form-inline my-2 my-lg-0">
					<input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
					<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
				</form>*@
			</div>
			@*<!-- Sidebar toggle button-->

		<div class="navbar-custom-menu">
			<ul class="nav navbar-nav">
				<li class="dropdown user user-menu">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown">
						<i class="fa fa-picture-o"></i>
						<span class="hidden-xs"><b>Wallpaper</b></span>
					</a>
					<ul class="dropdown-menu">
						<!-- User image -->
						<li class="user-footer text-center">
							<span class="btn btn-success fileinput-button">
								<i class="fa fa-camera bg-green"></i>
								<span>Select file ...</span>
								<!-- The file input field used as target for the file upload widget -->
								<input id="fileupload" type="file" name="files" multiple="">
							</span>
						</li>
						<li class="user-footer">
							<div id="progress" class="progress">
								<div class="progress-bar progress-bar-success"></div>
							</div>
						</li>

					</ul>
				</li>
				<!-- User Account: style can be found in dropdown.less -->
				@Html.Partial("_ProfileSignout")

			</ul>
		</div>*@
		</nav>
		<!-- =============================================== -->
		<!-- Left side column. contains the sidebar -->
		<aside class="main-sidebar">
			<!-- sidebar: style can be found in sidebar.less -->
			<section class="sidebar">
				<!-- Sidebar user panel -->
				@Html.Partial("_UserPanel");

			</section>
			<!-- /.sidebar -->
		</aside>
		<!-- =============================================== -->
		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper" style="background-image: url(@wallpaperPicture); background-size: cover">
			@RenderBody()
		</div>
		<!-- /.content-wrapper -->
		@Html.Partial("_Footer")

	</div>
	<!-- ./wrapper -->


	<environment include="Development">
		<script src="~/lib/jquery/jquery.min.js"></script>
		<script src="~/lib/twitter-bootstrap/js/bootstrap.bundle.min.js"></script>
		<script src="~/js/site.js" asp-append-version="true"></script>
		<!--jqueryUI-->
		<script src="~/lib/jquery-ui-1.12.1/jquery-ui.min.js"></script>
		<!--datatables.net-->
		<script src="~/lib/datatables/js/jquery.dataTables.min.js"></script>
		<script src="~/lib/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
		<script src="~/lib/datatables.net-buttons/js/dataTables.buttons.js"></script>
		<!--serializeJSON-->
		<script src="~/lib/marioizquierdo-jquery.serializeJSON/jquery.serializejson.min.js"></script>
		<!--toastr-->
		<script src="~/lib/toastr/toastr.min.js"></script>
		<!--sweetalert-->
		<script src="~/lib/sweetalert/sweetalert.min.js"></script>
	</environment>
	<environment exclude="Development">
		<script src="~/lib/jquery/jquery.min.js"
			asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
			asp-fallback-test="window.jQuery"
			crossorigin="anonymous"
			integrity="sha384-K+ctZQ+LL8q6tP7I94W+qzQsfRV2a+AfHIi9k8z8l9ggpc8X+Ytst4yBo/hH+8Fk">
		</script>
		<script src="~/lib/twitter-bootstrap/js/bootstrap.bundle.min.js"
			asp-fallback-src="~/lib/twitter-bootstrap/js/bootstrap.bundle.min.js"
			asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal"
			crossorigin="anonymous"
			integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa">
		</script>
		<script src="~/js/site.min.js" asp-append-version="true"></script>
		<!--jqueryUI-->
		<script src="~/lib/jquery-ui-1.12.1/jquery-ui.min.js"></script>
		<!--datatables.net-->
		<script src="~/lib/datatables/js/jquery.dataTables.min.js"></script>
		<script src="~/lib/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
		<!--serializeJSON-->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.serializeJSON/2.9.0/jquery.serializejson.min.js"></script>
		<!--toastr-->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
		<!--sweetalert-->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
	</environment>

	@RenderSection("Scripts", required: false)

	<!-- Ladda -->
	<script src="~/lib/ladda/spin.min.js"></script>
	<script src="~/lib/ladda/ladda.min.js"></script>
	<script src="~/lib/ladda/ladda.jquery.min.js"></script>
	<!-- SlimScroll -->
	<script src="~/lib/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<!-- FastClick -->
	<script src="~/lib/fastclick/lib/fastclick.js"></script>
	<!-- AdminLTE App -->
	<script src="~/admin-lte/js/adminlte.js"></script>
	<script src="~/admin-lte/js/demo.js"></script>
	<script>
		$(document).ready(function () {
			$('.sidebar-menu').tree()
		})
	</script>


	<script>
		$(function () {

			var url = '/api/UploadFile/Wallpaper';
			$('#fileupload').fileupload({
				url: url,
				dataType: 'json',
				done: function (e, data) {
					$(".content-wrapper").attr("style", "background-image: url(" + '../uploads/' + data.result + "); background-size: cover; min-height: 514px");
				},
				progressall: function (e, data) {
					var progress = parseInt(data.loaded / data.total * 100, 10);
					$('#progress .progress-bar').css(
						'width',
						progress + '%'
					);
				}
			}).prop('disabled', !$.support.fileInput)
				.parent().addClass($.support.fileInput ? undefined : 'disabled');
		});
	</script>
</body>
</html>
